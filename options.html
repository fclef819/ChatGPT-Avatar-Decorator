<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ChatGPT Avatar Decorator Options</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <main class="page">
      <h1>ChatGPT Avatar Decorator</h1>
      <div id="toast" class="toast" aria-live="polite"></div>

      <section class="card">
        <h2>全体設定</h2>
        <div class="field">
          <label for="globalName">表示名</label>
          <input id="globalName" type="text" placeholder="例: サポートAI" />
        </div>
        <div class="field">
          <label for="globalMode">画像モード</label>
          <select id="globalMode">
            <option value="random">ランダム</option>
            <option value="sentiment">ポジネガ順(1=ネガ,5=ポジ)</option>
          </select>
        </div>
        <div class="field">
          <label>画像(最大5枚)</label>
          <div class="image-grid" id="globalImages"></div>
          <p class="hint sentiment-hint" id="globalSentimentHint">
            画像スロット1→5の順で、ネガティブ→ポジティブに配置してください。
          </p>
        </div>
        <div class="field">
          <label>背景画像</label>
          <div class="bg-row">
            <div class="bg-preview is-empty" id="globalBgPreview"></div>
            <div class="bg-controls">
              <input id="globalBgInput" type="file" accept="image/*" />
              <button id="globalBgClear" type="button">クリア</button>
            </div>
          </div>
          <p class="hint">画面サイズに合わせて自動調整されます。</p>
        </div>
        <div class="field">
          <label>チャット枠カラー</label>
          <div class="color-grid">
            <div class="color-field">
              <label for="globalAssistantBg">AI 背景色</label>
              <input
                id="globalAssistantBg"
                type="text"
                placeholder="#ffffff / rgba(0,0,0,0.8)"
              />
            </div>
            <div class="color-field">
              <label for="globalAssistantText">AI テキスト色</label>
              <input
                id="globalAssistantText"
                type="text"
                placeholder="#111111 / rgba(0,0,0,0.9)"
              />
            </div>
            <div class="color-field">
              <label for="globalUserBg">ユーザー背景色</label>
              <input id="globalUserBg" type="text" placeholder="#f5f5f5 / rgba(0,0,0,0.06)" />
            </div>
            <div class="color-field">
              <label for="globalUserText">ユーザーテキスト色</label>
              <input id="globalUserText" type="text" placeholder="#111111 / rgba(0,0,0,0.9)" />
            </div>
          </div>
          <p class="hint">未入力ならChatGPTの既定色を使います。</p>
        </div>
        <div class="size-preview-row">
          <div class="size-panel">
            <div class="field field-compact">
              <label for="globalAvatarSize">画像サイズ(px)</label>
              <input id="globalAvatarSize" type="number" min="16" max="96" step="1" />
            </div>
            <div class="field field-compact">
              <label for="globalNameSize">名前サイズ(px)</label>
              <input id="globalNameSize" type="number" min="10" max="32" step="1" />
            </div>
          </div>
          <div class="preview-panel">
            <label class="preview-label">プレビュー</label>
            <div class="preview message-preview" id="globalPreview">
              <div class="preview-header">
                <div class="preview-avatar"></div>
                <div class="preview-name"></div>
              </div>
              <div class="preview-bubble assistant">
                <div class="preview-line"></div>
                <div class="preview-line short"></div>
              </div>
              <div class="preview-bubble user">
                <div class="preview-line"></div>
                <div class="preview-line short"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="actions">
          <button id="saveGlobal">全体設定を保存</button>
        </div>
      </section>

      <section class="card">
        <h2>プロジェクト別設定</h2>
        <p class="hint">
          ChatGPTのURLが <code>/projects/&lt;projectId&gt;</code> または
          <code>/g/&lt;projectId&gt;/c/&lt;chatId&gt;</code> 形式の場合、その
          <code>projectId</code> を入力してください。
        </p>
        <div class="field">
          <label for="projectId">projectId</label>
          <input id="projectId" type="text" placeholder="例: 8f2c9c..." />
          <div class="field field-child">
            <label for="projectUrl">URLから抽出（補助）</label>
            <div class="inline-row">
              <input id="projectUrl" type="text" placeholder="https://chatgpt.com/g/..." />
              <button id="extractProjectId" type="button">抽出</button>
            </div>
          </div>
        </div>
        <div class="field">
          <label for="projectName">表示名</label>
          <input id="projectName" type="text" placeholder="例: プロジェクト専用AI" />
        </div>
        <div class="field">
          <label for="projectMode">画像モード</label>
          <select id="projectMode">
            <option value="random">ランダム</option>
            <option value="sentiment">ポジネガ順(1=ネガ,5=ポジ)</option>
          </select>
        </div>
        <div class="field">
          <label>画像(最大5枚)</label>
          <div class="image-grid" id="projectImages"></div>
          <p class="hint sentiment-hint" id="projectSentimentHint">
            画像スロット1→5の順で、ネガティブ→ポジティブに配置してください。
          </p>
        </div>
        <div class="field">
          <label>背景画像</label>
          <div class="bg-row">
            <div class="bg-preview is-empty" id="projectBgPreview"></div>
            <div class="bg-controls">
              <input id="projectBgInput" type="file" accept="image/*" />
              <button id="projectBgClear" type="button">クリア</button>
            </div>
          </div>
          <p class="hint">画面サイズに合わせて自動調整されます。</p>
        </div>
        <div class="field">
          <label>チャット枠カラー</label>
          <div class="color-grid">
            <div class="color-field">
              <label for="projectAssistantBg">AI 背景色</label>
              <input
                id="projectAssistantBg"
                type="text"
                placeholder="#ffffff / rgba(0,0,0,0.8)"
              />
            </div>
            <div class="color-field">
              <label for="projectAssistantText">AI テキスト色</label>
              <input
                id="projectAssistantText"
                type="text"
                placeholder="#111111 / rgba(0,0,0,0.9)"
              />
            </div>
            <div class="color-field">
              <label for="projectUserBg">ユーザー背景色</label>
              <input id="projectUserBg" type="text" placeholder="#f5f5f5 / rgba(0,0,0,0.06)" />
            </div>
            <div class="color-field">
              <label for="projectUserText">ユーザーテキスト色</label>
              <input id="projectUserText" type="text" placeholder="#111111 / rgba(0,0,0,0.9)" />
            </div>
          </div>
          <p class="hint">未入力ならChatGPTの既定色を使います。</p>
        </div>
        <div class="size-preview-row">
          <div class="size-panel">
            <div class="field field-compact">
              <label for="projectAvatarSize">画像サイズ(px)</label>
              <input id="projectAvatarSize" type="number" min="16" max="96" step="1" />
            </div>
            <div class="field field-compact">
              <label for="projectNameSize">名前サイズ(px)</label>
              <input id="projectNameSize" type="number" min="10" max="32" step="1" />
            </div>
          </div>
          <div class="preview-panel">
            <label class="preview-label">プレビュー</label>
            <div class="preview message-preview" id="projectPreview">
              <div class="preview-header">
                <div class="preview-avatar"></div>
                <div class="preview-name"></div>
              </div>
              <div class="preview-bubble assistant">
                <div class="preview-line"></div>
                <div class="preview-line short"></div>
              </div>
              <div class="preview-bubble user">
                <div class="preview-line"></div>
                <div class="preview-line short"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="actions">
          <button id="saveProject">プロジェクト設定を保存/更新</button>
          <button id="clearProject">入力をクリア</button>
        </div>

        <div class="list" id="projectList"></div>
      </section>

      <section class="card">
        <h2>設定の入出力</h2>
        <div class="actions">
          <button id="exportSettings">設定をダウンロード</button>
          <label class="import-label">
            <input id="importSettings" type="file" accept="application/json" />
            設定をアップロード
          </label>
        </div>
        <p class="hint">JSONファイルでエクスポート/インポートできます。</p>
      </section>
    </main>

    <script src="options.js"></script>
  </body>
</html>
