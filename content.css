.cad-root {
  --cad-bg-image: none;
  --cad-bg-overlay: 0;
  --cad-bg-size: cover;
  --cad-bg-position: center;
  --cad-bg-repeat: no-repeat;
  --cad-bg-attachment: fixed;
  --cad-bubble-padding-y: 10px;
  --cad-bubble-padding-x: 12px;
  --cad-bubble-radius: 14px;
}

html.cad-bg,
body.cad-bg,
body.cad-bg #__next,
body.cad-bg #__next > div,
body.cad-bg main,
body.cad-bg [data-scroll-root],
body.cad-bg div[class*="@container/main"] {
  background-color: transparent !important;
}

html.cad-bg,
body.cad-bg,
body.cad-bg > div:nth-of-type(2) > div:first-child > div > div:nth-child(2),
body.cad-bg div[class*="@container/main"] {
  background-image:
    linear-gradient(
      rgba(0, 0, 0, var(--cad-bg-overlay)),
      rgba(0, 0, 0, var(--cad-bg-overlay))
    ),
    var(--cad-bg-image) !important;
  background-size: var(--cad-bg-size) !important;
  background-position: var(--cad-bg-position) !important;
  background-repeat: var(--cad-bg-repeat) !important;
  background-attachment: var(--cad-bg-attachment) !important;
}

.cad-message {
  --cad-avatar-size: 35px;
  --cad-header-gap: 8px;
  --cad-name-size: 13px;
  position: relative;
  padding-top: calc(var(--cad-avatar-size) + var(--cad-header-gap));
}

.cad-header {
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  gap: var(--cad-header-gap);
  margin: 0;
  justify-content: flex-start;
}

.cad-avatar {
  width: var(--cad-avatar-size);
  height: var(--cad-avatar-size);
  border-radius: 50%;
  object-fit: cover;
  flex: 0 0 var(--cad-avatar-size);
}

.cad-name {
  font-size: var(--cad-name-size);
  font-weight: 600;
  opacity: 0.8;
  margin-right: 4px;
}

.cad-message-assistant > :not(.cad-header) {
  background-color: var(--cad-assistant-bg) !important;
  padding: var(--cad-bubble-padding-y) var(--cad-bubble-padding-x) !important;
  border-radius: var(--cad-bubble-radius) !important;
}

.cad-message-user > :not(.cad-header) {
  background-color: var(--cad-user-bg) !important;
  padding: var(--cad-bubble-padding-y) var(--cad-bubble-padding-x) !important;
  border-radius: var(--cad-bubble-radius) !important;
}

.cad-message-assistant,
.cad-message-assistant > :not(.cad-header),
.cad-message-assistant > :not(.cad-header) * {
  color: var(--cad-assistant-text) !important;
}

.cad-message-user,
.cad-message-user > :not(.cad-header),
.cad-message-user > :not(.cad-header) * {
  color: var(--cad-user-text) !important;
}

.cad-message-assistant
  > :not(.cad-header):is(pre, code, kbd, samp, [data-language], [class*="code-block"]),
.cad-message-assistant
  > :not(.cad-header):is(pre, code, kbd, samp, [data-language], [class*="code-block"])
  *,
.cad-message-assistant
  > :not(.cad-header)
  :is(pre, code, kbd, samp, [data-language], [class*="code-block"]),
.cad-message-assistant
  > :not(.cad-header)
  :is(pre, code, kbd, samp, [data-language], [class*="code-block"])
  *,
.cad-message-user > :not(.cad-header):is(pre, code, kbd, samp, [data-language], [class*="code-block"]),
.cad-message-user > :not(.cad-header):is(pre, code, kbd, samp, [data-language], [class*="code-block"]) *,
.cad-message-user > :not(.cad-header) :is(pre, code, kbd, samp, [data-language], [class*="code-block"]),
.cad-message-user > :not(.cad-header) :is(pre, code, kbd, samp, [data-language], [class*="code-block"]) * {
  color: var(--text-primary, inherit) !important;
}

.cad-glass-panel {
  background-color: rgba(18, 28, 40, 0.34) !important;
  border: 1px solid rgba(255, 255, 255, 0.18) !important;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.22) !important;
  backdrop-filter: blur(14px) saturate(135%) !important;
  -webkit-backdrop-filter: blur(14px) saturate(135%) !important;
}

body.cad-bg #page-header.cad-glass-panel {
  background-color: rgba(18, 28, 40, 0.26) !important;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2) !important;
}

body.cad-bg [data-scroll-root].cad-glass-panel {
  border-radius: 0 !important;
  overflow-y: auto !important;
  overflow-x: clip !important;
  scrollbar-gutter: auto !important;
}

body.cad-bg .cad-project-header-clear,
body.cad-bg .cad-project-header-clear.bg-token-main-surface-primary {
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
}

body.cad-bg .cad-list-dark {
  background-color: rgba(8, 12, 18, 0.42) !important;
  border: 1px solid rgba(255, 255, 255, 0.12) !important;
  border-radius: 12px !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

body.cad-bg .cad-list-dark [class*="bg-token-main-surface"],
body.cad-bg .cad-list-dark [class*="main-surface-primary"],
body.cad-bg .cad-list-dark [class*="main-surface-secondary"],
body.cad-bg .cad-list-dark [style*="main-surface-primary"],
body.cad-bg .cad-list-dark [style*="main-surface-secondary"] {
  background: transparent !important;
  background-color: transparent !important;
}

@media (max-width: 768px) {
  body.cad-bg,
  body.cad-bg > div:nth-of-type(2) > div:first-child > div > div:nth-child(2),
  body.cad-bg div[class*="@container/main"] {
    background-attachment: scroll !important;
  }
}

.cad-toggle-btn {
  position: fixed;
  right: 16px;
  bottom: 16px;
  z-index: 2147483644;
  border: 1px solid rgba(255, 255, 255, 0.44);
  border-radius: 999px;
  padding: 7px 12px;
  font-size: 12px;
  font-weight: 700;
  line-height: 1;
  color: #fff;
  background: rgba(24, 30, 42, 0.72);
  backdrop-filter: blur(8px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  cursor: pointer;
}

.cad-toggle-btn:hover {
  background: rgba(30, 40, 56, 0.85);
}

.cad-toggle-btn.is-off {
  background: rgba(70, 22, 22, 0.78);
}

.cad-toggle-toast {
  position: fixed;
  right: 16px;
  bottom: 56px;
  z-index: 2147483645;
  background: rgba(15, 18, 24, 0.88);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.35);
  border-radius: 8px;
  padding: 6px 10px;
  font-size: 12px;
  transition: opacity 160ms ease, transform 160ms ease;
}

.cad-toggle-toast.hide {
  opacity: 0;
  transform: translateY(4px);
}
